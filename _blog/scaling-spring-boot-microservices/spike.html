{% include_relative spike.svg %}
<script>
(function() {
  const svg = document.querySelector('#spike')
  const wrapper = document.createElement('div')
  wrapper.classList = 'relative'
  const restart = document.createElement('div')
  restart.classList = 'restart'
  restart.innerHTML = '<span>Restart</span>'
  wrap(svg, wrapper)
  wrapper.appendChild(restart)
  const basicTimeline = anime.timeline({
    autoplay: false,
  });
  basicTimeline
  .add({
    begin: function() {
      wrapper.onclick = function() {}
      restart.classList.add('inactive')
    }
  })
  .add({
    targets: '#spike-animejs-line',
    d: 'M99,412.59749 C99,412.59749 146.283879,412.510656 220.438137,410.089443 C294.592394,407.668229 400.898543,422.509307 451.124885,356.985465 C501.351227,291.461624 505.548577,80.4053541 558.671392,109.788314 C611.794206,139.171273 677.162757,427.71686 789,413.200076 L789,419 L99,418.600698 L99,412.59749 Z',
    easing: 'easeOutExpo',
  })
  .add({
    complete: function() {
      wrapper.onclick = basicTimeline.restart
      restart.classList.remove('inactive')
    }
  })
  wrapper.onclick = basicTimeline.restart
  onScrollIntoView(svg, function() {
    setTimeout(basicTimeline.play, 1000)
  });
  function wrap(el, wrapper) {
    el.parentNode.insertBefore(wrapper, el);
    wrapper.appendChild(el);
  }
})();
</script>