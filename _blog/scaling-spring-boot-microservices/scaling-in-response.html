{% include_relative scaling-in-response.svg %}
<script>
(function() {
  const svg = document.querySelector('#scaling-in-response')
  const wrapper = document.createElement('div')
  wrapper.classList = 'relative'
  const restart = document.createElement('div')
  restart.classList = 'restart'
  restart.innerHTML = '<span>Restart</span>'
  wrap(svg, wrapper)
  wrapper.appendChild(restart)
  const basicTimeline = anime.timeline({
    autoplay: false,
  });
  basicTimeline
  .add({
    begin: function() {
      wrapper.onclick = function() {}
      restart.classList.add('inactive')
    }
  })
  .add({
    targets: '#scaling-in-response-animejs-up2',
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-alert2',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: ['#scaling-in-response-animejs-up1', '#scaling-in-response-animejs-up3', '#scaling-in-response-animejs-up4'],
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: ['#scaling-in-response-animejs-alert1', '#scaling-in-response-animejs-alert3', '#scaling-in-response-animejs-alert4'],
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-instance5',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-instance6',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-instance7',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-instance8',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: ['#scaling-in-response-animejs-alert1', '#scaling-in-response-animejs-alert2', '#scaling-in-response-animejs-alert3', '#scaling-in-response-animejs-alert4'],
    opacity: [1, 0],
    easing: 'easeInExpo',
  })
  .add({
    targets: [
      '#scaling-in-response-animejs-up1',
      '#scaling-in-response-animejs-up2',
      '#scaling-in-response-animejs-up3',
      '#scaling-in-response-animejs-up4',
      '#scaling-in-response-animejs-up5',
      '#scaling-in-response-animejs-up6',
      '#scaling-in-response-animejs-up7',
      '#scaling-in-response-animejs-up8'
    ],
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    complete: function() {
      wrapper.onclick = basicTimeline.restart
      restart.classList.remove('inactive')
    }
  })
  wrapper.onclick = basicTimeline.restart
  onScrollIntoView(svg, function() {
    setTimeout(basicTimeline.play, 1000)
  });
  function wrap(el, wrapper) {
    el.parentNode.insertBefore(wrapper, el);
    wrapper.appendChild(el);
  }

  anime.timeline({
    autoplay: true,
    loop: true
  })
  .add({
    targets: '#scaling-in-response-animejs-connection2',
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection3',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection1',
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection1',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection2',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection4',
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection3',
    opacity: [1, 0],
    easing: 'easeOutExpo',
  })
  .add({
    targets: '#scaling-in-response-animejs-connection4',
    opacity: [0, 1],
    easing: 'easeInExpo',
  })
})();
</script>
<style>
  #scaling-in-response-animejs-connection1 path,
  #scaling-in-response-animejs-connection2 path,
  #scaling-in-response-animejs-connection3 path,
  #scaling-in-response-animejs-connection4 path {
    stroke-dasharray: 10;
    animation: dash 15s linear infinite;
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 1000;
    }
  }
</style>